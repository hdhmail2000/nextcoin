//
//  XHHEntrustCell.m
//  FuturePurse
//
//  Created by Apple on 2018/7/27.
//  Copyright © 2018年 jbtm. All rights reserved.
//

#import "XHHEntrustCell.h"
#import "XHHEntrustRowTableCell.h"
#import "XHHEntrustRowTableHeadView.h"

static NSString *cellInditifier = @"XHHEntrustRowTableCell";
@interface XHHEntrustCell ()<UITableViewDelegate,UITableViewDataSource>

@property (weak, nonatomic) IBOutlet UILabel *nameLable;

@property (weak, nonatomic) IBOutlet UILabel *timeLable;
@property (weak, nonatomic) IBOutlet UILabel *muchMoney;
@property (weak, nonatomic) IBOutlet UILabel *allMoney;
@property (weak, nonatomic) IBOutlet UILabel *profitMoney;
@property (weak, nonatomic) IBOutlet UIButton *typeButton;
@property (weak, nonatomic) IBOutlet UILabel *typeLable;
@property (weak, nonatomic) IBOutlet UIImageView *typeImage;
@property (weak, nonatomic) IBOutlet UIView *bgView;
@property (weak, nonatomic) IBOutlet UILabel *sumLable;

@property (strong, nonatomic) UITableView  *tableView;
@property (strong, nonatomic) XHHEntrustRowTableHeadView *headView;
@property (strong, nonatomic) NSArray      *dataArray;

@end

@implementation XHHEntrustCell

- (void)awakeFromNib {
    [super awakeFromNib];
    // Initialization code
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}
-(void)IsDealList:(BOOL)isDeal{
    if (isDeal) {
        self.typeImage.hidden = NO;
        self.sumLable.hidden = YES;
        [self.typeButton setTitle:@"已成交" forState:UIControlStateNormal];
    }else{
        self.typeImage.hidden = YES;
        self.sumLable.hidden = NO;
    }
}

-(void)creatPayDetailListWithList:(NSArray *)list{
    self.typeImage.image = [UIImage imageNamed:@"tead_entrust_show"];
    self.dataArray = list;
    [self.contentView addSubview:self.headView];
    [self.headView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.left.equalTo(self.contentView).offset(16);
        make.top.equalTo(self.bgView.mas_bottom);
        make.right.mas_equalTo(self.contentView).offset(-16);
        make.height.mas_equalTo(40);
    }];
    [self.contentView addSubview:self.tableView];
    [self.tableView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.left.right.equalTo(self.headView);
        make.top.equalTo(self.headView.mas_bottom);
        make.height.mas_equalTo(30*list.count);
    }];
}
-(void)removeDealListView{
    self.typeImage.image = [UIImage imageNamed:@"tead_entrust_close"];
    [self.headView removeFromSuperview];
    [self.tableView removeFromSuperview];
}

-(UITableView *)tableView{
    if (!_tableView) {
        _tableView = [[UITableView alloc] init];
        _tableView.delegate = self;
        _tableView.dataSource = self;
        _tableView.rowHeight = 30;
        _tableView.backgroundColor = [UIColor colorWithHexString:@"363672"];
        [_tableView setSeparatorColor:[UIColor clearColor]];
//        [_tableView setSeparatorColor:[UIColor colorWithHexString:@"363672"]];
        [_tableView registerNib:[UINib nibWithNibName:@"XHHEntrustRowTableCell" bundle:nil] forCellReuseIdentifier:cellInditifier];
    }
    return _tableView;
}
-(XHHEntrustRowTableHeadView *)headView{
    if (!_headView) {
        _headView = [[[NSBundle mainBundle] loadNibNamed:@"XHHEntrustRowTableHeadView" owner:nil options:nil] lastObject];
        _headView.backgroundColor = [UIColor colorWithHexString:@"363672"];
    }
    return _headView;
}
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return self.dataArray.count;
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    XHHEntrustRowTableCell *cell = [tableView dequeueReusableCellWithIdentifier:cellInditifier];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;
}
@end
